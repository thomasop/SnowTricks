{% extends 'base.html.twig' %}

{% block title %}Home{% endblock %}
{% block javascripts %}
<script src="{{ asset('js/buttonMoreTricks.js') }}"></script>
{% endblock %}
{% block body %}
    {% for message in app.flashes('success') %}
        <div class="alert alert-success">
            {{ message }}
        </div>
    {% endfor %}
{% include 'header.html.twig' %}
<img src="../uploads/pictures/homepage.jpg" class="bg">
<a href="#trick" class="button"><img src="../css/icons/arrow-down.svg" width="42" height="46" title="White flower" alt="Flower"></a>
{% if is_granted('ROLE_ADMIN') %}
    <a href="{{ path('add_trick') }}"><img src="../css/icons/plus.svg" width="22" height="26" title="White flower" alt="Flower"></a>
{% endif %}

<div class="trick">
    <p id="trick"> Les tricks</p>
    <div class="row">
        {% for i in trick %}
        <div class="col-lg-4 mb-4">
            <div class="card">
                <img class="" src="/uploads/pictures/{{ i.picture }}" alt="Trick" width="350" height="301">
                <div class="card-body">
                    <p>{{ i.name }}</p>
                    {% if is_granted('ROLE_ADMIN') %}
                        {% if app.user.id == i.user_id %}
                            <a href="{{ path('one_trick', {id: i.id}) }}"><img src="../css/icons/trash-fill.svg" width="22" height="26" title="White flower" alt="Flower"></a>
                            <a href="{{ path('update_trick', {id: i.id}) }}"><img src="../css/icons/brush-fill.svg" width="22" height="26" title="White flower" alt="Flower"></a>
                        {% endif %}
                    {% endif %}
                    <a href="{{ path('comment', {id: i.id, page: '1'}) }}">Lire la suite</a>
                </div>
            </div>
        </div>
        {% endfor %}
        <div class="container">
            <div class="row justify-content-center m-3">
                <a href="#" id="loadMoreTrick">More<i class="fas fa-plus-circle fa-3x"></i></a>
                <a href="#" id="loadLessTrick">Less<i class="fas fa-minus-circle fa-3x"></i></a>              
            </div>
        </div> 
    </div>
</div>

{% include 'footer.html.twig' %}
{% endblock %}